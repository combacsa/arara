{% extends "board/base.html" %}
{% load arara_tags %}

{% block style %}
<link rel="stylesheet" type="text/css" href="/media/style/board_list.css"></link>
{{block.super}}
{% endblock style %}

{% block script %}
<script type="text/javascript" src="/media/js/board_list.js"></script>
{{block.super}}
{% endblock script %}

{% block board_content %}
{% block article_content %}{% endblock article_content %}
{% load i18n %}
<div id="article_table" class="width_full">
    <table cellspacing="0" id="board_table" summary="{{board_description}}" class="width_full">
        <colgroup>
            <col id="board_cursor_col" class="cursor_col"/>
            <col id="board_id_col" class="id_col"/>
            <col id="board_title_col" class="title_col"/>
            <col id="board_author_col" class="author_col"/>
            <col id="board_date_col" class="date_col"/>
        </colgroup>
        <thead>
            <tr>
                <th class="column cursor_col" scope="col"></th>
                <th class="column id_col" scope="col">{% trans "id " %}</th>
                <th class="column title_col" scope="col">{% trans "title" %}</th>
                <th class="column author_col" scope="col">{% trans "author" %}</th>
                <th class="column date_col" scope="col">{% trans "date" %}</th>
                <th class="column vote_col" scope="col">vote</th>
                <th class="column hit_col" scope="col">hit</th>
            </tr>
        </thead>
        <tbody>
            {% for article in article_list %}
            <tr rel="{{forloop.counter}}">
                <td class="column cursor_col">{% ifnotequal article.read_status 'R' %}{{article.read_status}}{%endifnotequal%}</td>
                <td class="column id_col" rel="{{article.id}}">{{article.id}}</td>
                <td class="column title_col{%if article.deleted%} deleted{%endif%}">
                    {% if logged_in %}
                        {% if have_heading %}
                        {% ifnotequal article.heading '' %} <strong>[{{article.heading}}]</strong> {% endifnotequal %}
                        {% endif %}
                        <a href="/board/{{article.board_name}}/{{article.id}}/?page_no={{page_no}}">{{article.title|truncatechars:"60"}}</a>
                        {%if article.reply_count%}[{{article.reply_count}}]{%endif%}
                    {% else %}
                        {{article.title|truncatechars:"60"}}{% if article.reply_count%} [{{article.reply_count}}]{% endif %}
                    {% endif %}
                </td>
                <td class="column author_col">
                        <span class="nickname">{{article.author_nickname|truncatechars:"8"}}<span class="hidden username">{{article.author_username}}</span></span>
                </td>
                <td class="column date_col">{{article.date|date:"Y/m/d"}}</td>
                <td class="column vote_col">{{article.vote}}</td>
                <td class="column hit_col">{{article.hit}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<div id="board_pages" class="width_full">
    {% ifequal method 'search' %}
    <a href="{{path}}&page_no={{first_page.no}}">{{first_page.mark}}</a>
    <a href="{{path}}&page_no={{prev_page_group.no}}">{{prev_page_group.mark}}</a>
    {% for page in page_list %}
    <a href="{{path}}&page_no={{page}}">{{page}}</a>
    {% endfor %}
    <a href="{{path}}&page_no={{next_page_group.no}}">{{next_page_group.mark}}</a>
    <a href="{{path}}&page_no={{last_page.no}}">{{last_page.mark}}</a>
    {% else %}
    {% if first_page.no %}<a href="/board/{{board_name}}/?page_no={{first_page.no}}">{{first_page.mark}}</a> {% endif %}
    {% if prev_page_group.no %}<a href="/board/{{board_name}}/?page_no={{prev_page_group.no}}">{{prev_page_group.mark}}</a> {% endif %}
    {% for page in page_list %}
    <a href="/board/{{board_name}}/?page_no={{page}}"{%ifequal page page_no%} class="bold"{%endifequal%}>{{page}}</a>
    {% endfor %}
    {% if next_page_group.no %}<a href="/board/{{board_name}}/?page_no={{next_page_group.no}}">{{next_page_group.mark}}</a> {% endif %}
    {% if last_page.no %}<a href="/board/{{board_name}}/?page_no={{last_page.no}}">{{last_page.mark}}</a> {% endif %}
    {% endifequal %}
</div>
{% if logged_in %}
<div id="heading_buttons" class="width_full">
    <form name="heading_search" method="GET" action="/board/{{board_name}}" id="heading_search">
        {% if have_heading %}
            <select name="heading" class="heading_list">
                <option value="" name="all">{% trans "All" %}</option>
                <option value="" {% ifequal default_heading "" %}selected="selected"{% endifequal %}>{% trans "No Heading" %}</option>
                {% for heading in board_heading_list %}
                    <option value={{ heading }} {% ifequal heading default_heading %}selected="selected"{% endifequal %}>{{ heading }}</option>
                {% endfor %}
            </select>
        {% endif %}
    </form>
</div>
<div id="board_buttons" class="width_full">
    <div id="board_search">
        <form name="board_search" method="GET" action="/board/{{board_name}}/search">
            {% for smi in search_method_list %}
                <span class="search_method">
                    <a href="#" rel="{{smi.val}}" name="search_method_select"{%if smi.selected%} class="selected"{%endif%}>{{smi.text}}</a>
                    <input type="hidden" value="{{smi.val}}"{%if smi.selected%} name="{{smi.val}}"{%endif%}></input>
                </span>
            {% endfor %}
            <input type="text" name="search_word" class="small_form" id="board_search_content" value="{{ search_word }}"></input>
            <input type="hidden" name="search_heading" id="board_search_heading" value="" />
            <input class="" type="submit" value="{% trans "search" %}" id="board_search_submit"></input>
        </form>
    </div>
    <div id="board_write" class="{% if board_dict.read_only %} hidden{% endif %}">
        <a href="/board/{{board_name}}/write/">{% trans "write" %}</a>
    </div>
</div>
{%endif%}
{% endblock board_content %}
