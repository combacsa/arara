{% extends "board/list.html" %}

{% block style %}
{{block.super}}
<link type="text/css" href="/media/thirdparty/css/smoothness/jquery-ui-1.7.custom.css" rel="Stylesheet" /> 
{% endblock style %}

{% block script %}
{{block.super}}
<script type="text/javascript" src="/media/thirdparty/jquery-ui-1.7.custom.min.js"></script>
<script type="text/javascript" src="/media/thirdparty/autoresize.jquery.min.js"></script>
<script type="text/javascript" src="/media/js/board_read.js"></script>
{% endblock script %}

{% block article_content %}
{% load i18n %}

{% if is_sysop_or_manager %}
<fieldset id="move_article">
    <form action="/board/move_article/" method="post">
        <select name="board_to_move" id="board_to_move">
            {% for board in board_list %}
            <option value="{{board.board_name}}">{{board.board_name}}</option>
            {% endfor %}
        </select>
        <input type="hidden" name="board_name" value="{{root_article.board_name}}" />
        <input type="hidden" name="article_no" value="{{root_article.id}}" />
        <input type="submit" id="apply_move_article" value="게시물 이동" />
    </form>
</fieldset>
{% endif %}

<div class="articleView">
    <div class="articleTitle">
        <h3><a href="#">{{article.title}}</a></h3>
        <p class="smallCat"><a href="/board/{{board_name}}/?heading={{article.heading}}">{{article.heading}}</a></p>
        <div class="articleInfo" rel="{{article.id}}">
            <p class="author">{{article.author_nickname}} <span class="eng">{{article.author_username}}</span></p>
            <p class="readCount">조회 <span class="eng">{{article.hit}}</span></p>
            <p class="recCount">추천 <span class="eng">+<span id="positive_vote_num_{{article.id}}">{{article.positive_vote}}</span> / -<span id="negative_vote_num_{{article.id}}">{{article.negative_vote}}</span></span></p>
            <p class="date">{% filter lower %}{{article.date|date:"Y/m/d g:i A"}}{% endfilter %}</p>
            <div class="cb"></div>
        </div>
    </div>
    <div class="articleContents">
        {% if not article.blacklisted %}
        <table class="attached" cellspacing="0">
            <tbody>
                {% for file in article.attach %}
                <tr>
                    <th>첨부{{forloop.counter}}</th>
                    <td><a href="/board/{{board_name}}/{{article.root_id}}/{{article.id}}/file/{{file.file_id}}" target="_blank">{{file.filename}}</a>
                        {% if file.file_id in article.image %}
                        <div>
                            <a href="/board/{{board_name}}/{{article.root_id}}/{{article.id}}/file/{{file.file_id}}" target="_blank"><img src="/board/{{board_name}}/{{article.root_id}}/{{article.id}}/file/{{file.file_id}}" target="_blank" alt="{{file.file_id}}" /></a>
                        </div>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <div class="article">
            {{article.content|safe|linebreaksbr}}
        </div>
        {% else %}
        {% trans "BLACKLISTED" %}
        {% endif %}

        {% if not article.deleted %}
        <p class="articleButtons">
            <input type="submit" class="smallButton reply" value="답글달기" /><input type="submit" class="smallButton rec" value="추천하기" /><input type="submit" class="smallButton dis" value="반대하기" /><input type="submit" class="smallLightButton modify" value="수정하기" /><input type="submit" class="smallLightButton delete" value="삭제하기" />
            <input type="hidden" id="board_name" value="{{board_name}}" /><input type="hidden" id="root_id" value="{{article.root_id}}" /><input type="hidden" id="article_id" value="{{article.id}}" />
        </p>
        {% endif %}
        {% autoescape off %}
        {{ rendered_reply }}
        {% endautoescape %}
        <div class="addReply">
            <form name="targetId" method="post" action="">
                <table cellspacing="0">
                    <tbody>
                        <tr class="arTitle">
                            <th><label for="targetId_title">제목</label></th>
                            <td><input type="text" name="targetId_title" id="targetId_title" /></td>
                        </tr>
                        <tr class="arContents">
                            <th><label for="targetId_contents">내용</label></th>
                            <td><textarea name="targetId_contents" id="targetId_contents"></textarea></td>
                        </tr>
                        <tr class="arSignature">
                            <th><label for="targetId_signature">시그너쳐</label></th>
                            <td>
                                <input type="checkbox" name="targetId_enableSig" id="targetId_enableSig" class="enableSig" checked /><label for="targetId_enableSig">시그너쳐를 사용합니다.</label><br />
                                <textarea name="targetId_signature" class="signatureBox"></textarea>
                            </td>
                        </tr>

                        <tr class="arAttach">
                            <th><label for="targetId_attach_1">첨부1</label></th>
                            <td><input name="targetId_attach_1" id="targetId_attach_1" type="file" /> <a id="attach_more" href="#">더 첨부하기</a></td>
                        </tr>
                        <tr class="arSubmit">
                            <th></th>
                            <td><input type="submit" id="targetId" class="darkButtonReply" value="확인" /></td>
                        </tr>
                    </tbody>
                </table>
            </form>
        </div>
    </div>
</div>
{% endblock %}
