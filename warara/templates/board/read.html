{% extends "board/list.html" %}

{% block style %}
{{block.super}}
<link rel="stylesheet" type="text/css" href="/media/style/board_read.css"></link>
{% endblock style %}

{% block script %}
{{block.super}}
<script type="text/javascript" src="/media/js/board_read.js"></script>
{% endblock script %}

{% block article_content %}
{% load i18n %}

{% for article in article_read_list %}
<div class="article article_depth_{{article.depth}}">
    {% for depth in article.depth_list %}
    <img class="reply_title_img img_{{depth}}" src="/media/image/board/read_reply_hierarchy.jpg"></img>
    {% endfor %}
    {% ifequal article.id article.root_id %}
    <h1 class="root_article_title"><a href="#">{{article.title}}</a></h1>
    <div id="root_article_info">
        <span class="user_nickname username">{{article.author_nickname}}</span>
        <span class="user_name">{{article.author_username}}</span>
        <span class="article_date">{{article.date|date:"Y/m/d H:i:s"}}</span>
        <span class="vote">{% trans "vote: " %}<span class="vote_num_{{article.id}}">{{article.vote}}</span> |</span>
        <span class="hit">{% trans "hit: " %}{{article.hit}} |</span>
        <div class="clear_float"></div>
    </div>
    {% else %}
    <div class="article_reply_title">
        <h1><a href="#">{{article.title}}</a></h1>
        <span class="article_info">
            <span class="user_nickname username">{{article.author_nickname}}</span>
            <span class="user_name">{{article.author_username}}</span> |
            <span class="vote">{% trans "vote: " %}<span class="vote_num_{{article.id}}">{{article.vote}}</span> </span> |
            <span class="article_date">{{article.date|date:"Y/m/d H:i:s"}}</span>
        </span>
        <div class="clear_float"></div>
    </div>
    {% endifequal %}
    <div class="article_content{%ifequal article.read_status "R" %} previously_read{% endifequal %}">
        <div class="{%ifequal article.id article.root_id%}article_root_text{%else%}article_text{%endifequal%}">
            {% if not article.blacklisted %}
            {{article.content|safe|linebreaksbr}}
            {% else %}
            {% trans "BLACKLISTED" %}
            {% endif %}
        </div>
        <div class="article_file">
            {% if article.attach %}
            {% trans "file(s) : " %}
            {% endif %}
            {% for file in article.attach %}
            <a href="/board/{{board_name}}/{{article.root_id}}/{{article.id}}/file/{{file.file_id}}" target="_blank">{{file.filename}}</a>
            {% endfor %}
        </div>
        <div class="article_read_buttons">
            {% if not article.deleted %}
            <a class="article_reply_show" href="#">{% trans "reply" %}</a>
            {% if article.flag_modify %}
            <a class="article_modify" href="/board/{{board_name}}/write?article_id={{article.id}}">{% trans "modify" %}</a>
            <a class="article_delete" href="/board/{{board_name}}/{{article.root_id}}/{{article.id}}/delete/">{% trans "delete" %}</a>
            {% endif %}
            <a class="article_vote" rel="{{article.id}}" href="/board/{{board_name}}/{{article.root_id}}/{{article.id}}/vote">{% trans "vote" %}</a>
            {% endif %}
        </div>
        <div class="clear_float"></div>
        <div class="article_reply">
            <form class="article_reply_form" action="/board/{{board_name}}/{{article.id}}/reply/" method="POST" enctype="multipart/form-data">
                <input type="hidden" name="root_id" value="{{article.root_id}}" />
                <ul>
                    <li><input type="text" name="title" class="write_reply_title" value="{{article.title}}" /></li>
                    <li><textarea name="content"></textarea></li>
                </ul>
                <input type="hidden" value="{{article_no}}" name="article_no"></input>
                <div class="article_write_file">
                    <div class="file_line">
                        <span class="article_write_file_caption">{% trans "file 1" %}</span>
                        <div class="file_upload_p">
                            <div class="file_upload_t">
                                <input type="file" name="file1" class="file_upload" size=5></input>
                            </div>
                            <div class="file_upload_f">
                                <input name="file1_fi" class="file_input_f"></input> <!-- file1 fake input -->
                                <div class="file_search_button">
                                    {% trans "search" %}
                                </div>
                            </div>
                            <input type="button" name="file_input_add" class="small_btn" value="+"></input>
                        </div>
                    </div>
                </div>
		<input type="submit" class="write_reply small_btn" name="submit" value="{% trans "write" %}" />
		<input type="button" class="cancel_reply small_btn" value="{% trans "cancel" %}"></input>
                <div class="clear_float"></div>
            </form>
        </div>
    </div>
</div>
{% endfor %}

<div id="file_line_model">
    <div class="file_line">
        <span class="article_write_file_caption">{% trans "file 1" %}</span>
        <div class="file_upload_p">
            <div class="file_upload_t">
                <input type="file" name="file1" class="file_upload" size=95></input>
            </div>
            <div class="file_upload_f">
                <input name="file1_fi" class="file_input_f"></input> <!-- file1 fake input -->
                <div class="file_search_button">
                    {% trans "search" %}
                </div>
            </div>
            <input type="button" name="file_input_delete" class="small_btn" value="-"></input>
        </div>
    </div>
</div>
<div id="article_nav_buttons">
    <a class="btn" id="list_link" href="/board/{{board_name}}?page_no={{page_no}}">{% trans "list" %}</a>
    <a class="btn" id="write_link" href="/board/{{board_name}}/write">{% trans "write" %}</a>
</div>

{% endblock article_content %}
