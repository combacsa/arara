
# Bootstrap test

>>> import arara
>>> from arara_thrift.ttypes import *
>>> server = arara.get_namespace()

>>> server.member_manager.is_registered(u'SYSOP')
True
>>> SYSOP_session_key = server.login_manager.login(u'SYSOP', u'SYSOP', '143.248.234.145')

>>> import datetime
>>> import time

Fake time

>>> import time
>>> def stub_time():
...     return 1.1
>>> org_time = time.time
>>> time.time = stub_time

>>> notice_reg_dic = { 'content':u'hahahah', 'due_date':time.time(), 'weight':'3' }
>>> server.notice_manager.add_welcome(SYSOP_session_key, WrittenNotice(**notice_reg_dic))
>>> server.notice_manager.add_banner(SYSOP_session_key, WrittenNotice(**notice_reg_dic))

>>> notice_reg_dic = { 'content':u'hahahah', 'due_date':time.time(), 'weight':'1' }
>>> server.notice_manager.add_banner(SYSOP_session_key, WrittenNotice(**notice_reg_dic))
>>> notice_reg_dic = { 'content':u'hahahah', 'due_date':time.time(), 'weight':'2' }
>>> server.notice_manager.add_banner(SYSOP_session_key, WrittenNotice(**notice_reg_dic))


>>> server.notice_manager.get_banner()
u'hahahah'
>>> server.notice_manager.get_welcome()
u'hahahah'

>>> server.notice_manager.list_banner(SYSOP_session_key)
[Notice(due_date=datetime.datetime(1970, 1, 1, 9, 0, 1, 100000), weight=3, issued_date=datetime.datetime(1970, 1, 1, 9, 0, 1, 100000), content=u'hahahah', valid=True, id=1), Notice(due_date=datetime.datetime(1970, 1, 1, 9, 0, 1, 100000), weight=1, issued_date=datetime.datetime(1970, 1, 1, 9, 0, 1, 100000), content=u'hahahah', valid=True, id=2), Notice(due_date=datetime.datetime(1970, 1, 1, 9, 0, 1, 100000), weight=2, issued_date=datetime.datetime(1970, 1, 1, 9, 0, 1, 100000), content=u'hahahah', valid=True, id=3)]
>>> server.notice_manager.list_welcome(SYSOP_session_key)
[Notice(due_date=datetime.datetime(1970, 1, 1, 9, 0, 1, 100000), weight=3, issued_date=datetime.datetime(1970, 1, 1, 9, 0, 1, 100000), content=u'hahahah', valid=True, id=1)]

>>> server.notice_manager.remove_banner(SYSOP_session_key, 1)
>>> server.notice_manager.remove_welcome(SYSOP_session_key, 1)

>>> time.time = org_time
