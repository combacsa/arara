# Bootstrap test

>>> from arara_thrift.ttypes import *
>>> import arara.model
>>> arara.model.init_test_database()
>>> import arara
>>> server = arara.get_namespace()

# Login as SYSOP and create 'garbage' board

>>> session_key_sysop = server.login_manager.login(u'SYSOP', u'SYSOP', u'123.123.123.123')

>>> server.board_manager.add_board(session_key_sysop, u'garbages', u'Garbage Board')

# Register one user, mikkang

>>> user_reg_dic = {'username':u'mikkang', 'password':u'mikkang', 'nickname':u'mikkang', 'email':u'mikkang@example.com', 'signature':u'mikkang', 'self_introduction':u'mikkang', 'default_language':u'english' }
>>> register_key = server.member_manager.register(UserRegistration(**user_reg_dic))
>>> server.member_manager.confirm(u'mikkang', register_key)
>>> session_key = server.login_manager.login(u'mikkang', u'mikkang', u'143.248.234.140')

# Write an article

>>> article = Article(**{'title': u'serialx is...', 'content': u'polarbear'})
>>> server.article_manager.write_article(session_key, u'garbages', article)
1

# Write one more article

>>> article = Article(**{'title': u'serialx is...', 'content': u'polarbear'})
>>> server.article_manager.write_article(session_key, u'garbages', article)
2

# Read_Status_Manager check!

>>> server.read_status_manager.check_stat(session_key, 1)
'N'
>>> server.read_status_manager.check_stats(session_key, [1,2])
['N', 'N']
>>> server.read_status_manager.mark_as_read(session_key, 1)
>>> server.read_status_manager.mark_as_viewed(session_key, 2)
>>> server.read_status_manager.check_stats(session_key, [1,2])
['R', 'V']

Error Test

>>> server.read_status_manager.check_stat(session_key, 3)
Traceback (most recent call last):
  ...
InvalidOperation
>>> server.read_status_manager.check_stat('asdfasdf', 1)
Traceback (most recent call last):
  ...
NotLoggedIn

>>> server.read_status_manager.check_stats(session_key, [1,2,3])
Traceback (most recent call last):
  ...
InvalidOperation
>>> server.read_status_manager.check_stats('asdfasdf', [1,2])
Traceback (most recent call last):
  ...
NotLoggedIn

>>> server.read_status_manager.mark_as_read(session_key, 3)
Traceback (most recent call last):
  ...
InvalidOperation
>>> server.read_status_manager.mark_as_read('asdfasdf', 1)
Traceback (most recent call last):
  ...
NotLoggedIn

>>> server.read_status_manager.mark_as_viewed(session_key, 3)
Traceback (most recent call last):
  ...
InvalidOperation
>>> server.read_status_manager.mark_as_viewed('asdfasdf', 2)
Traceback (most recent call last):
  ...
NotLoggedIn

#Reset the database
>>> import arara.model
>>> arara.model.clear_test_database()
